SKIN = { }

SKIN.fontFrame		= "CombineControl.Window"
SKIN.fontTab		= "CombineControl.Window"

SKIN.GwenTexture	= Material( "gwenskin/GModDefault.png" );

SKIN.control_color 				= Color( 255, 255, 255, 255 )
SKIN.control_color_highlight	= Color( 150, 150, 150, 255 )
SKIN.control_color_active 		= Color( 255, 10, 10, 255 )
SKIN.control_color_bright 		= Color( 90, 90, 90, 255 )
SKIN.control_color_dark 		= Color( 40, 40, 40, 255 )

SKIN.Colours = {}

SKIN.Colours.Window = {}
SKIN.Colours.Window.TitleActive			= Color( 200, 200, 200, 255 );
SKIN.Colours.Window.TitleInactive		= Color( 200, 200, 200, 255 );

SKIN.Colours.Button = {}
SKIN.Colours.Button.Normal				= Color( 200, 200, 200, 255 );
SKIN.Colours.Button.Hover				= Color( 255, 255, 255, 255 );
SKIN.Colours.Button.Down				= Color( 255, 255, 255, 255 );
SKIN.Colours.Button.Disabled			= Color( 150, 150, 150, 255 );

SKIN.Colours.Label = { }
SKIN.Colours.Label.Default		= Color( 200, 200, 200, 255 );
SKIN.Colours.Label.Bright		= Color( 255, 255, 255, 255 );
SKIN.Colours.Label.Dark			= Color( 150, 150, 150, 255 );
SKIN.Colours.Label.Highlight	= Color( 255, 255, 255, 255 );

SKIN.Colours.Tab = {}
SKIN.Colours.Tab.Active = {}
SKIN.Colours.Tab.Active.Normal			= GWEN.TextureColor( 4 + 8 * 4, 508 );
SKIN.Colours.Tab.Active.Hover			= GWEN.TextureColor( 4 + 8 * 5, 508 );
SKIN.Colours.Tab.Active.Down			= GWEN.TextureColor( 4 + 8 * 4, 500 );
SKIN.Colours.Tab.Active.Disabled		= GWEN.TextureColor( 4 + 8 * 5, 500 );

SKIN.Colours.Tab.Inactive = {}
SKIN.Colours.Tab.Inactive.Normal		= GWEN.TextureColor( 4 + 8 * 6, 508 );
SKIN.Colours.Tab.Inactive.Hover			= GWEN.TextureColor( 4 + 8 * 7, 508 );
SKIN.Colours.Tab.Inactive.Down			= GWEN.TextureColor( 4 + 8 * 6, 500 );
SKIN.Colours.Tab.Inactive.Disabled		= GWEN.TextureColor( 4 + 8 * 7, 500 );

SKIN.Colours.Tree = {}
SKIN.Colours.Tree.Lines					= Color( 160, 160, 160, 255 );		---- !!!
SKIN.Colours.Tree.Normal				= Color( 160, 160, 160, 255 );
SKIN.Colours.Tree.Hover					= Color( 255, 255, 255, 255 );
SKIN.Colours.Tree.Selected				= Color( 200, 200, 200, 255 );

SKIN.Colours.Properties = {}
SKIN.Colours.Properties.Line_Normal			= GWEN.TextureColor( 4 + 8 * 12, 508 );
SKIN.Colours.Properties.Line_Selected		= GWEN.TextureColor( 4 + 8 * 13, 508 );
SKIN.Colours.Properties.Line_Hover			= GWEN.TextureColor( 4 + 8 * 12, 500 );
SKIN.Colours.Properties.Title				= GWEN.TextureColor( 4 + 8 * 13, 500 );
SKIN.Colours.Properties.Column_Normal		= GWEN.TextureColor( 4 + 8 * 14, 508 );
SKIN.Colours.Properties.Column_Selected		= GWEN.TextureColor( 4 + 8 * 15, 508 );
SKIN.Colours.Properties.Column_Hover		= GWEN.TextureColor( 4 + 8 * 14, 500 );
SKIN.Colours.Properties.Border				= GWEN.TextureColor( 4 + 8 * 15, 500 );
SKIN.Colours.Properties.Label_Normal		= GWEN.TextureColor( 4 + 8 * 16, 508 );
SKIN.Colours.Properties.Label_Selected		= GWEN.TextureColor( 4 + 8 * 17, 508 );
SKIN.Colours.Properties.Label_Hover			= GWEN.TextureColor( 4 + 8 * 16, 500 );

SKIN.Colours.Category = {}
SKIN.Colours.Category.Header				= GWEN.TextureColor( 4 + 8 * 18, 500 );
SKIN.Colours.Category.Header_Closed			= GWEN.TextureColor( 4 + 8 * 19, 500 );
SKIN.Colours.Category.Line = {}
SKIN.Colours.Category.Line.Text				= GWEN.TextureColor( 4 + 8 * 20, 508 );
SKIN.Colours.Category.Line.Text_Hover		= GWEN.TextureColor( 4 + 8 * 21, 508 );
SKIN.Colours.Category.Line.Text_Selected	= GWEN.TextureColor( 4 + 8 * 20, 500 );
SKIN.Colours.Category.Line.Button			= GWEN.TextureColor( 4 + 8 * 21, 500 );
SKIN.Colours.Category.Line.Button_Hover		= GWEN.TextureColor( 4 + 8 * 22, 508 );
SKIN.Colours.Category.Line.Button_Selected	= GWEN.TextureColor( 4 + 8 * 23, 508 );
SKIN.Colours.Category.LineAlt = {}
SKIN.Colours.Category.LineAlt.Text				= GWEN.TextureColor( 4 + 8 * 22, 500 );
SKIN.Colours.Category.LineAlt.Text_Hover		= GWEN.TextureColor( 4 + 8 * 23, 500 );
SKIN.Colours.Category.LineAlt.Text_Selected		= GWEN.TextureColor( 4 + 8 * 24, 508 );
SKIN.Colours.Category.LineAlt.Button			= GWEN.TextureColor( 4 + 8 * 25, 508 );
SKIN.Colours.Category.LineAlt.Button_Hover		= GWEN.TextureColor( 4 + 8 * 24, 500 );
SKIN.Colours.Category.LineAlt.Button_Selected	= GWEN.TextureColor( 4 + 8 * 25, 500 );

SKIN.colTextEntryText			= Color( 200, 200, 200, 255 )
SKIN.colTextEntryTextHighlight	= Color( 40, 40, 40, 255 )
SKIN.colTextEntryTextCursor		= Color( 200, 200, 200, 255 )

SKIN.Colours.TooltipText	= Color( 200, 200, 200, 255 );

SKIN.PrintName 		= "ZoneControl PDA"
SKIN.Author 		= "rusty"
SKIN.DermaVersion	= 1

function SKIN:PaintButton(pnl, w, h)
	if pnl.IsTabButton then
		kingston.gui.FindFunc(pnl, "Paint", "PageButton", w, h)
		return
	end
	
	if pnl.CloseButton then
		kingston.gui.FindFunc(pnl, "Paint", "CloseButton", w, h)
		return
	end
	
	if pnl.RightDateButton then
		kingston.gui.FindFunc(pnl, "Paint", "RightButton", w, h)
		return
	end
	
	if pnl.LeftDateButton then
		kingston.gui.FindFunc(pnl, "Paint", "LeftButton", w, h)
		return
	end
	
	if !pnl.NoPaint then
		surface.SetDrawColor(200,200,200,120)
		surface.DrawOutlinedRect(0,0,w,h)
	end
end

function SKIN:PaintVScrollBar(pnl, w, h)

end

function SKIN:PaintScrollBarGrip(pnl, w, h)
	kingston.gui.FindFunc(pnl, "Paint", "VBar", w, h)
end

function SKIN:PaintButtonUp(pnl, w, h)
	kingston.gui.FindFunc(pnl, "Paint", "VBarUp", w, h)
end

function SKIN:PaintButtonDown(pnl, w, h)
	kingston.gui.FindFunc(pnl, "Paint", "VBarDown", w, h)
end

function SKIN:PaintTextEntry(pnl, w, h)
	surface.SetDrawColor(200,200,200,120)
	surface.DrawOutlinedRect(0,0,w,h)
	
	pnl:DrawTextEntryText(pnl:GetTextColor(), pnl:GetHighlightColor(), pnl:GetCursorColor())
end

derma.DefineSkin( "zc_pda", "rusty", SKIN );

local UVSKIN = {}
UVSKIN.pda_mat = Material("kingston/pda_panels")
UVSKIN.MainBackground = {
	bg = {
		u0 = 0,
		v0 = 0.25,
		u1 = 1,
		v1 = 1,
	},
}

UVSKIN.ContentBackground = {
	top_left = {
		u0 = -0.0005,
		v0 = 0.0282,
		u1 = 0.017,
		v1 = 0.047,
	},
	top_right = {
		u0 = 0.07,
		v0 = 0.0282,
		u1 = 0.0933,
		v1 = 0.05,
	},
	bottom_left = {
		u0 = -0.0005,
		v0 = 0.046,
		u1 = 0.017,
		v1 = 0.0608,
	},
	bottom_right = {
		u0 = 0.067,
		v0 = 0.046,
		u1 = 0.0935,
		v1 = 0.0608,
	},
	left = {
		u0 = -0.0005,
		v0 = 0.043,
		u1 = 0.017,
		v1 = 0.04,
	},
	right = {
		u0 = 0.067,
		v0 = 0.046,
		u1 = 0.0935,
		v1 = 0.047,
	},
	top = {
		u0 = 0.025,
		v0 = 0.0282,
		u1 = 0.069,
		v1 = 0.047,
	},
	bottom = {
		u0 = 0.025,
		v0 = 0.046,
		u1 = 0.069,
		v1 = 0.0608,
	},
	mid = {
		u0 = 0.017,
		v0 = 0.047,
		u1 = 0.067,
		v1 = 0.046,
	},
}

UVSKIN.TabTitle = {
	left = {
		left = {
			u0 = 0.192,
			v0 = 0,
			u1 = 0.208,
			v1 = 0.027,
		},
		right = {
			u0 = 0.208,
			v0 = 0,
			u1 = 0.235,
			v1 = 0.027,
		},
		mid = {
			u0 = 0.194,
			v0 = 0,
			u1 = 0.208,
			v1 = 0.027,
		},
	},
	right = {
		left = {
			u0 = 0.2359,
			v0 = 0,
			u1 = 0.264,
			v1 = 0.027,
		},
		right = {
			u0 = 0.264,
			v0 = 0,
			u1 = 0.2896,
			v1 = 0.027,
		},
		mid = {
			u0 = 0.264,
			v0 = 0,
			u1 = 0.27,
			v1 = 0.027,
		},
	}
}

UVSKIN.PageButton = {
	hover = {
		u0 = 0.444,
		v0 = 0.209,
		u1 = 0.6125,
		v1 = 0.236,
	},
	normal = {
		u0 = 0.275,
		v0 = 0.209,
		u1 = 0.4431,
		v1 = 0.236,
	},
	active = {
		u0 = 0.6135,
		v0 = 0.209,
		u1 = 0.7817,
		v1 = 0.236,
	},
}

UVSKIN.CloseButton = {
	hover = {
		u0 = 0.1275,
		v0 = 0.03,
		u1 = 0.159,
		v1 = 0.0609,
	},
	normal = {
		u0 = 0.094,
		v0 = 0.03,
		u1 = 0.126,
		v1 = 0.0609,
	},
}

UVSKIN.VBar = {
	up = {
		normal = {
			u0 = 0.238,
			v0 = 0.209,
			u1 = 0.255,
			v1 = 0.2285,
		},
		hover = {
			u0 = 0.2031,
			v0 = 0.2099,
			u1 = 0.2197,
			v1 = 0.2275,
		},
	},
	down = {
		normal = {
			u0 = 0.255,
			v0 = 0.2097,
			u1 = 0.2731,
			v1 = 0.2369,
		},
		hover = {
			u0 = 0.22,
			v0 = 0.21,
			u1 = 0.2379,
			v1 = 0.2369,
		},
	},
}

UVSKIN.DateButton = {
	left = {
		normal = {
			u0 = 0.2011,
			v0 = 0.0947,
			u1 = 0.2304,
			v1 = 0.125,
		},
		hover = {
			u0 = 0.2011,
			v0 = 0.0634,
			u1 = 0.23,
			v1 = 0.0936,
		},
	},
	right = {
		normal = {
			u0 = 0.232,
			v0 = 0.0947,
			u1 = 0.262,
			v1 = 0.1245,
		},
		hover = {
			u0 = 0.232,
			v0 = 0.0634,
			u1 = 0.262,
			v1 = 0.0932,
		},
	},
}

function UVSKIN:PaintMain(pnl, w, h)
	local bg = self.MainBackground.bg
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DrawTexturedRectUV(0, 0, w, h, bg.u0, bg.v0, bg.u1, bg.v1)
end

function UVSKIN:PaintBody(pnl, w, h)
	local body = self.ContentBackground
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)

	local corner_w = ScreenScaleH(16)
	local corner_h = ScreenScaleH(16)
	
	surface.DrawTexturedRectUV(0, 0, corner_w, corner_h, body.top_left.u0, body.top_left.v0, body.top_left.u1, body.top_left.v1)
	surface.DrawTexturedRectUV(pnl:GetWide() - corner_w, 0, corner_w, corner_h, body.top_right.u0, body.top_right.v0, body.top_right.u1, body.top_right.v1)
	
	surface.DrawTexturedRectUV(0, pnl:GetTall() - corner_h, corner_w, corner_h, body.bottom_left.u0, body.bottom_left.v0, body.bottom_left.u1, body.bottom_left.v1)
	surface.DrawTexturedRectUV(pnl:GetWide() - corner_w, pnl:GetTall() - corner_h, corner_w, corner_h, body.bottom_right.u0, body.bottom_right.v0, body.bottom_right.u1, body.bottom_right.v1)
	
	local side_h = pnl:GetTall() - (corner_h * 2)
	if side_h > 0 then
		surface.DrawTexturedRectUV(0, corner_h, corner_w, side_h, body.left.u0, body.left.v0, body.left.u1, body.left.v1)
		surface.DrawTexturedRectUV(pnl:GetWide() - corner_w, corner_h, corner_w, side_h, body.right.u0, body.right.v0, body.right.u1, body.right.v1)
	end
	
	local mid_w = pnl:GetWide() - (corner_w * 2)
	local mid_h = pnl:GetTall() - (corner_h * 2)
	
	surface.DrawTexturedRectUV(corner_w, 0, mid_w, corner_h, body.top.u0, body.top.v0, body.top.u1, body.top.v1)
	surface.DrawTexturedRectUV(corner_w, pnl:GetTall() - corner_h, mid_w, corner_h, body.bottom.u0, body.bottom.v0, body.bottom.u1, body.bottom.v1)
	
	surface.DrawTexturedRectUV(corner_w, corner_h, mid_w, mid_h,  body.mid.u0, body.mid.v0, body.mid.u1, body.mid.v1)
end

function UVSKIN:PaintPageButton(pnl, w, h)
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	local state = UVSKIN.PageButton.normal
	
	if pnl.ActivePage then
		state = UVSKIN.PageButton.active
	else
		if pnl:IsHovered() then
			state = UVSKIN.PageButton.hover
		end
	end
	
	surface.DrawTexturedRectUV(0, 0, w, h, state.u0, state.v0, state.u1, state.v1)
end

function UVSKIN:PaintCloseButton(pnl, w, h)
	local state = self.CloseButton.normal
	if pnl:IsHovered() then
		state = self.CloseButton.hover
	end
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DrawTexturedRectUV(0, 0, w, h, state.u0, state.v0, state.u1, state.v1)
end

function UVSKIN:PaintVBar(pnl, w, h)
	surface.SetDrawColor(200,200,200,120)
	surface.DrawOutlinedRect(0,0,w,h)
end

function UVSKIN:PaintVBarUp(pnl, w, h)
	local state = self.VBar.up.normal
	if pnl:IsHovered() then
		state = self.VBar.up.hover
	end
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DrawTexturedRectUV(0, 0, w, h, state.u0, state.v0, state.u1, state.v1)
end

function UVSKIN:PaintVBarDown(pnl, w, h)
	local state = self.VBar.down.normal
	if pnl:IsHovered() then
		state = self.VBar.down.hover
	end
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DisableClipping(true)
	surface.DrawTexturedRectUV(-1, 0, w + 2, h + ScreenScaleH(6), state.u0, state.v0, state.u1, state.v1)
	surface.DisableClipping(false)
end

function UVSKIN:PaintLeftButton(pnl, w, h)
	local state = self.DateButton.left.normal
	if pnl:IsHovered() then
		state = self.DateButton.left.hover
	end
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DrawTexturedRectUV(0, 0, w, h, state.u0, state.v0, state.u1, state.v1)
end

function UVSKIN:PaintRightButton(pnl, w, h)
	local state = self.DateButton.right.normal
	if pnl:IsHovered() then
		state = self.DateButton.right.hover
	end
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	surface.DrawTexturedRectUV(0, 0, w, h, state.u0, state.v0, state.u1, state.v1)
end

function UVSKIN:PaintTabTitle(pnl, w, h)
	local left = self.TabTitle.left
	local right = self.TabTitle.right
	
	surface.SetDrawColor(color_white)
	surface.SetMaterial(self.pda_mat)
	
	local count = #pnl:GetParent().TabButtons
	local side_w = ScreenScaleH(16)
	
	local left_x = ScreenScaleH(8)
	local left_y = ScreenScaleH(12)
	
	local right_w = ScreenScaleH(64)
	local right_h = ScreenScaleH(16)
	local right_x = pnl:GetWide() - right_w - left_x - side_w
	local right_y = ScreenScaleH(12)
	
	surface.DrawTexturedRectUV(right_x, right_y, side_w, right_h, right.left.u0, right.left.v0, right.left.u1, right.left.v1)
	surface.DrawTexturedRectUV(right_x + side_w, right_y, right_w - side_w, right_h, right.mid.u0, right.mid.v0, right.mid.u1, right.mid.v1)
	surface.DrawTexturedRectUV(right_x + right_w, right_y, side_w, right_h, right.right.u0, right.right.v0, right.right.u1, right.right.v1)

	local left_w = pnl:GetWide() - right_w - left_x - side_w * 3 
	local left_w = left_w - (count*ScreenScaleH(76)) - (count*ScreenScaleH(4+count))
	
	local left_h = ScreenScaleH(16)
	
	surface.DrawTexturedRectUV(left_x, left_y, side_w, left_h, left.left.u0, left.left.v0, left.left.u1, left.left.v1)
	surface.DrawTexturedRectUV(left_x + side_w, left_y, left_w - side_w, left_h, left.mid.u0, left.mid.v0, left.mid.u1, left.mid.v1)
	surface.DrawTexturedRectUV(left_x + left_w, left_y, side_w, left_h, left.right.u0, left.right.v0, left.right.u1, left.right.v1)
	
	surface.SetFont("CombineControl.ChatNormal")
	
	if pnl:GetParent().CurrentTab then
		local text = pnl:GetParent().CurrentTab:GetText()
		local tW, tH = surface.GetTextSize(text)
		surface.SetTextColor(200,200,200)
		surface.SetTextPos(left_x + ScreenScaleH(4), left_y + (left_h / 2) - (tH / 2))
		surface.DrawText(text)
	end
	
	local text = os.date("!%H:%M")
	local tW, tH = surface.GetTextSize(text)
	surface.SetTextColor(200,200,200)
	surface.SetTextPos(right_x + right_w - tW - ScreenScaleH(8), right_y + (right_h / 2) - (tH / 2))
	surface.DrawText(text)
end

kingston.gui.RegisterSkin("zc_pda", UVSKIN)